<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="Fast Fourier Transform Learning Demo"/>
    <meta name="date" content="2025-08-28" />
    <meta name="tags" content="Digital Signal Processing, Vibrations" />
    <meta name="thumbnail" content="Articles/Images/FFT.jpg"/>
    <meta name="summary" content="Better understand a Fourier Transform with this tool"/>
    <title>Luke Buck | Fast Fourier Transform Demo</title>
    <link rel="stylesheet" href="Article_Template.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
   <link rel="icon" href="/Images/Logo.png" type="image/png" />
</head>
<body>
  <!-- HEADER -->
  <header>
  <div class="header-container">
      <h2 class="site-name">
        <a href="../index.html">Luke Buck</a>
      </h2>
      <nav class="desktop-nav">
        <a href="../index.html#about">About</a>
        <a href="../index.html#education">Education</a>
        <a href="../index.html#articles">Projects</a>
        <a href="../index.html#experience">Experience</a>
        <a href="../index.html#music">Music</a>
        <a href="../index.html#certs">Certifications</a>
        <a href="../index.html#contact">Contact</a>
      </nav>
      <button id="menu-toggle">‚ò∞</button>
    </div>
    <nav id="mobile-menu">
      <a href="../index.html#about">About</a>
      <a href="../index.html#education">Education</a>
      <a href="../index.html#articles">Projects</a>
      <a href="../index.html#experience">Experience</a>
      <a href="../index.html#music">Music</a>
      <a href="../index.html#certs">Certifications</a>
      <a href="../index.html#contact">Contact</a>
    </nav>
  </header>

  <!-- üìù TITLE + SUMMARY -->
  <main class="article-main">
    <div class="back-wrapper">
      <a href="../projects.html" class="back-link">‚Üê Projects & Research</a>
    </div>
    <h1 class="article-title">Fast Fourier Transform Learning Demo</h1>
    <img src="Images/FFT.jpg" alt="Main visual" class="main-article-image" />
    <p class="article-summary">Better understand a Fourier Transform with this tool</p>
      <p class="article-date">Published: August 28, 2025</p>
    <p class="article-date">Tags: Digital Signal Processing, Vibrations</p>
    <p class="article-author">By Luke Buck</p>

    <!-- üßæ ARTICLE CONTENT -->
    <article class="article-body">

    <p>Alright, confession time. I never really understood the Fourier Transform, let alone the Fast Fourier Transform (FFT) in college. I could interpret the frequency response graph just fine, but I didn't understand the transform or the FFT algorithm. Finally, I figured it was time to learn both. I found this <a href="https://jakevdp.github.io/blog/2013/08/28/understanding-the-fft/" target="_blank" rel="noopener">Pythonic Perambulations article</a> to be very helpful as I learned. I encourage you to visit this website if you'd like to learn more about the FFT. For now though, focus on this demo I made. </p>

    <p>Below you can select three frequencies and their amplitudes. You can also add noise to the resulting signal. The first plot will show the combined frequencies in the time domain. The second plot will show the frequency response of the time signal. Additionally, you can view aliased frequencies mirrored across the Nyquist frequency (512 Hz here, given our 1024 Hz sampling rate).</p>

    <p>Hopefully you'll see two key things when adjusting the sliders. First, the frequency response peak is half of the input frequency amplitude. For example a 3 Hz signal with an amplitude of 10 will result in a FFT peak at 3 Hz with a magnitude of 5. Second, adding noise (in this case, non-centered noise) will cause a steep FFT peak at 0 Hz. This noise makes other FFT peaks less distinct and makes interpreting results more difficult.</p>

      
    <h2 class="section-heading">Frequency 1</h2>
    <div class="sliders-container">
      <div class="slider-row">
        <label class="slider-label">Frequency:</label>
        <input type="text" id="value1" value="1" class="value-box-freq" readonly>
        <input type="range" id="slider1" min="1" max="20" value="1" class="value-slider-freq">
      </div>

      <div class="slider-row">
        <label class="slider-label">Amplitude:</label>
        <input type="number" id="value2" value="1" class="value-box" readonly>
        <input type="range" id="slider2" min="1" max="10" value="1" class="value-slider">
      </div>
    </div>

    <h2 class="section-heading">Frequency 2</h2>
    <div class="sliders-container">
      <div class="slider-row">
        <label class="slider-label">Frequency:</label>
        <input type="text" id="value3" value="1" class="value-box-freq" readonly>
        <input type="range" id="slider3" min="1" max="20" value="1" class="value-slider-freq">
      </div>

      <div class="slider-row">
        <label class="slider-label">Amplitude:</label>
        <input type="number" id="value4" value="1" class="value-box" readonly>
        <input type="range" id="slider4" min="1" max="10" value="1" class="value-slider">
      </div>
    </div>

    <h2 class="section-heading">Frequency 3</h2>
    <div class="sliders-container">
      <div class="slider-row">
        <label class="slider-label">Frequency:</label>
        <input type="text" id="value5" value="1" class="value-box-freq" readonly>
        <input type="range" id="slider5" min="1" max="20" value="1" class="value-slider-freq">
      </div>

      <div class="slider-row">
        <label class="slider-label">Amplitude:</label>
        <input type="number" id="value6" value="1" class="value-box" readonly>
        <input type="range" id="slider6" min="1" max="10" value="1" class="value-slider">
      </div>
    </div>

    <h2 class="section-heading">Noise Level:</h2>
    <div class="sliders-container" style="margin-bottom: 30px;">
      <div class="slider-row">
        <label class="slider-label">Noise Level:</label>
        <input type="number" id="value7" value="0" class="value-box" readonly>
        <input type="range" id="slider7" min="0" max="10" value="0" class="value-slider">
      </div>
    </div>

    <div style="display: flex; justify-content: space-between; align-items: center; flex: auto; margin-bottom: 30px;">
      <!-- Left-aligned button -->
      <button id="randomizeBtn" class="back-button">
        Randomize Values
      </button>

      <!-- Right-aligned toggle -->
      <label class="toggle-container">
        <input type="checkbox" id="fftToggle">
        Show Aliased Frequencies
      </label>
    </div>

      <!-- <canvas id="myChart" width="600" height="400" min-height="300"></canvas> -->

      <div id="myPlot" style="width:100%;height:400px;"></div>
      <div id="fftPlot" style="width:100%;height:400px;"></div>

    </article>
  </main>

  <footer>
  <p id="updated-footer">Last updated: <span id="updated-date"></span></p>
  <p class="signature">Tell your dog I say hi!</p>
  <p class="social-links">
    <a href="https://linkedin.com/in/luke-a-buck" target="_blank">
      <img src="../Images/linkedin.png" alt="LinkedIn" class="social-icon">
    </a>
  </p>
</footer>

</body>

<script>
  // Last updated script
  document.getElementById("updated-date").textContent =
    new Date(document.lastModified).toLocaleDateString();
</script>

<script>
    // ========== MOBILE MENU ==========
    const menuToggle = document.getElementById("menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    menuToggle.addEventListener("click", () => {
        mobileMenu.classList.toggle("show");
    });

</script>

<script>
  window.addEventListener("scroll", () => {
    const header = document.querySelector("header");
    const maxScroll = document.body.scrollHeight - window.innerHeight;
    const scrollRatio = Math.min(1, window.scrollY / maxScroll);
    const fill = Math.floor(scrollRatio * 100);

    header.style.borderImage = `linear-gradient(to right, #3a6ea5 ${fill}%, transparent ${fill}%) 1`;
  });

      document.querySelectorAll("#mobile-menu a").forEach(link => {
      link.addEventListener("click", () => {
        document.getElementById("mobile-menu").classList.remove("show");
      });
    });

    window.addEventListener("resize", () => {
      const mobileMenu = document.getElementById("mobile-menu");
      const breakpoint = 750; // üëà change this if needed

      if (window.innerWidth > breakpoint && mobileMenu.classList.contains("show")) {
        mobileMenu.classList.remove("show");
      }
    });
</script>
<script>
    window.addEventListener("resize", () => {
      const mobileMenu = document.getElementById("mobile-menu");
      const breakpoint = 750; // üëà change this if needed

      if (window.innerWidth > breakpoint && mobileMenu.classList.contains("show")) {
        mobileMenu.classList.remove("show");
      }
    });
</script>

<script>
document.getElementById('randomizeBtn').addEventListener('click', () => {
  document.querySelectorAll('.value-slider, .value-slider-freq').forEach(slider => {
    const min = parseFloat(slider.min);
    const max = parseFloat(slider.max);
    const randomValue = Math.floor(min + Math.random() * (max - min + 1));

    slider.value = randomValue;

    const row = slider.closest('.slider-row');
    const box = row.querySelector('input[type="number"], input[type="text"]');

    if (slider.classList.contains('value-slider-freq')) {
      box.value = randomValue + " Hz";
    } else {
      box.value = randomValue;
    }
  });

  updatePlot();
});
</script>

<script>
function updatePlot() {
  // get chart colorscheme
  const isDarkMode = window.matchMedia &&
                    window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (isDarkMode) {
    papercolor = "#121212"
    plotcolor = "#121212"
    gridcolor = "#4D4D4D"
    fontcolor = "#FFFFFF"
  } else {
    papercolor = "#f9f9f9"
    plotcolor = "#f9f9f9"
    gridcolor = "#D8D8D8"
    fontcolor = "#000"
  }

  // read slider values
  const f1 = parseFloat(document.getElementById('slider1').value);
  const a1 = parseFloat(document.getElementById('slider2').value);
  const f2 = parseFloat(document.getElementById('slider3').value);
  const a2 = parseFloat(document.getElementById('slider4').value);
  const f3 = parseFloat(document.getElementById('slider5').value);
  const a3 = parseFloat(document.getElementById('slider6').value);
  const nl = parseFloat(document.getElementById('slider7').value);

  // --- generate signal ---
const N = 2048;        // must be a power of 2
const end = 2;
const step = end / N;
const avg = (a1+a2+a3)/3;
yValues = [];
xValues = [];
maxf = Math.max(f1,f2,f3);
minf = Math.min(f1,f2,f3);

for (let i = 0; i < N; i++) {
  const x = i * step;
  const y =
    Math.sin(2 * Math.PI * f1 * x) * a1 +
    Math.sin(2 * Math.PI * f2 * x) * a2 +
    Math.sin(2 * Math.PI * f3 * x) * a3 +
    Math.random() * (nl * avg / 2);
  yValues.push(y);
  xValues.push(x);
}

  xrange2 = [0, 1.5];

  // --- plot time-domain ---
  Plotly.newPlot("myPlot",
    [{
      x: xValues,
      y: yValues,
      mode: "lines",
      line: { color: '#3a6ea5', width: 2 }
    }],
    {
      title: "Time Domain Signal",
      xaxis: { title: "Time (s)", linecolor: "#000", range: xrange2 ,gridcolor: gridcolor},
      font: { family: "Arial", size: 14, color: fontcolor},
      yaxis: {gridcolor: gridcolor}, 
      hovermode: false,
      margin: { l: 30, r: 10, t: 50, b: 90 },
      plot_bgcolor: plotcolor,
      paper_bgcolor: papercolor
    },
    { staticPlot: false,
      displayModeBar: false
    }
  );

  // Complex number helper
  class Complex {
    constructor(re, im) {
      this.re = re;
      this.im = im;
    }
    add(other) {
      return new Complex(this.re + other.re, this.im + other.im);
    }
    sub(other) {
      return new Complex(this.re - other.re, this.im - other.im);
    }
    mul(other) {
      return new Complex(
        this.re * other.re - this.im * other.im,
        this.re * other.im + this.im * other.re
      );
    }
    mag() {
      return Math.sqrt(this.re * this.re + this.im * this.im);
    }
  }

  // Recursive radix-2 Cooley-Tukey FFT
  function fft(signal) {
    const N = signal.length;
    if (N <= 1) return [signal[0]];

    if (N % 2 !== 0) {
      throw new Error("FFT input length must be a power of 2");
    }

    const even = fft(signal.filter((_, i) => i % 2 === 0));
    const odd  = fft(signal.filter((_, i) => i % 2 !== 0));

    const results = new Array(N);
    for (let k = 0; k < N / 2; k++) {
      const twiddle = new Complex(
        Math.cos((-2 * Math.PI * k) / N),
        Math.sin((-2 * Math.PI * k) / N)
      );
      const t = twiddle.mul(odd[k]);
      results[k] = even[k].add(t);
      results[k + N / 2] = even[k].sub(t);
    }
    return results;
  }

  // Convert signal to complex array
  const complexSignal = yValues.map(v => new Complex(v, 0));

  // Compute FFT
  const fftOut = fft(complexSignal);

  // Magnitude spectrum
  const fftResult = fftOut.map(c => c.mag() / N);

  // Frequency axis
  Fs = 1 / step;
  console.log(Fs)
  const freqs = Array.from({ length: N }, (_, i) => i * Fs / N);

  // --- plot FFT ---
  let xRange;
  const toggle = document.getElementById("fftToggle");
  if (toggle.checked) {
    // Show aliased frequencies (full Nyquist range)
    xRange = [0, Fs];
  } else {
    // Show only 0‚Äì25 Hz
    xRange = [0, maxf+5];
  }

  // --- plot FFT ---
  Plotly.newPlot("fftPlot",
    [{
      x: freqs,
      y: fftResult,
      mode: "lines",
      line: { color: '#c83264', width: 3 }
    }],
    {
      title: "Frequency Domain (FFT)",
      xaxis: { title: "Frequency (Hz)", range: xRange, gridcolor: gridcolor},
      yaxis: {gridcolor: gridcolor}, 
      font: { family: "Arial", size: 14, color: fontcolor },
      hovermode: false,
      margin: { l: 30, r: 10, t: 50, b: 50 },
      plot_bgcolor: plotcolor,
      paper_bgcolor: papercolor,
    },
    { staticPlot: false,
      displayModeBar: false
    }
  );
}

// live update on slider change
document.querySelectorAll('.value-slider').forEach(slider => {
  slider.addEventListener('input', (e) => {
    const row = e.target.closest('.slider-row');
    const box = row.querySelector('input[type="number"], input[type="text"]');
    box.value = e.target.value;
    updatePlot();
  });
});

document.querySelectorAll('.value-slider-freq').forEach(slider => {
  slider.addEventListener('input', (e) => {
    const row = e.target.closest('.slider-row');
    const box = row.querySelector('input[type="number"], input[type="text"]');
    box.value = e.target.value + " Hz";
    updatePlot();
  });
});

// fire each once on page load
document.querySelectorAll('.value-slider, .value-slider-freq').forEach(slider => {
  slider.dispatchEvent(new Event('input'));
  updatePlot();
});

    // --- toggle x-axis range ---
document.getElementById("fftToggle").addEventListener("change", (e) => {
  updatePlot();
});

</script>

<script>
  // Listen for window resize
  window.addEventListener('resize', () => {
    updatePlot();
  });

  // Listen for system/browser color scheme changes
  const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
  darkModeMediaQuery.addEventListener('change', () => {
    updatePlot();
  });
</script>
</html>
